
### Post loan request from PO
POST http://localhost:8080/smart-mf/v1/smart-po-buffer-loan-proposals
Content-Type: application/json
x-po-device-id: dE3nWSlMQ06cLolLibvYG_
x-app-type: SMART_PO
X-APK-VERSION: 53
X-APK-VERSION-CODE: 1.0.53-uat(09-May 06 42 PM)
X-DEVICE-MODEL: HONOR - CRT-NX1 - CRT-NX1 - 33 - REL

[
{
  "id": "{{loan-uid}}",
  "loanProposalId": 123823351344640,
  "applicationDate": "2024-07-16",
  "disbursementDate": null,
  "approvalCode": null,
  "approvedDurationInMonths": null,
  "approvedLoanAmount": 0.0,
  "grantPercentage": null,
  "installmentAmount": 1230.0,
  "interestRate": 24.0,
  "loanProductId": 42,
  "loanProductDetailsId": 1410,
  "loanProductPolicyId": 1324,
  "memberId": 16276971,
  "proposalNo": "202407-123823351344640",
  "proposalRefNo": null,
  "proposalRemarks": null,
  "proposalDurationInMonths": 9,
  "proposedGrantAmount": 0.0,
  "proposedLoanAmount": 11211.0,
  "preProposedLoanAmount": 11211.0,
  "schemeId": 295,
  "sectorId": 3,
  "totalPovertyScore": 0,
  "transactionNo": null,
  "branchId": 342,
  "branchCode": "0459",
  "approvedGrantAmount": 0.0,
  "loanSecurityAmount": 0.0,
  "loanSecurityBalance": null,
  "noOfInstallment": 9,
  "proposedPo": 174842,
  "cohortMappingId": null,
  "assetPurchaseId": null,
  "loanProposalStatusId": 6,
  "disbursementSubStatus": null,
  "approvalStatusId": 2,
  "approvalFlowStatus": 1,
  "scannedFileName": null,
  "loanAccountId": null,
  "microInsurance": true,
  "policyTypeId": 1,
  "secondInsurer": null,
  "insuranceProductId": 33,
  "premiumAmount": 23.0,
  "premiumInterestRate": 0.0,
  "guarantors": [
    {
      "nameEn": "Abdul Aual",
      "dateOfBirth": "1994-07-16",
      "relationshipId": 2,
      "contactNo": "01355768855",
      "address": null,
      "imageUrl": null,
      "guardianName": null,
      "memberNo": null,
      "signature": null,
      "idCards": [
        {
          "cardTypeId": 1,
          "idCardNo": "87589559555555555",
          "frontImageUrl": "file_50673_641406145_80456328_690333047_1912644525.jpg",
          "backImageUrl": null,
          "issueDate": null,
          "expiryDate": null,
          "issuePlace": null
        }
      ],
      "idCard": null,
      "isNewGuarantor": true,
      "isKnownByWitness": true
    }
  ],
  "numOfFamilyMembers": null,
  "numOfDependants": null,
  "familyIncome": 10000,
  "familyExpense": 0,
  "familyUnderAnotherLoan": false,
  "tinNumber": null,
  "bankId": null,
  "bankBranchId": null,
  "bankAccountNumber": null,
  "routingNumber": null,
  "smallGroupLeaderImage": null,
  "otherSavingsAmount": 0,
  "estimatedAnnualExpense": 0,
  "otherLoanOutstanding": 0,
  "otherLoanTotal": 0,
  "nominees": null,
  "memberExistingLoanAmountDto": null,
  "projectId": 1,
  "projectCode": "15",
  "voCode": "2039",
  "voId": 316963,
  "memberTypeId": 25,
  "subSectorId": 15,
  "flag": 1,
  "frequencyId": 3,
  "updated": null,
  "signConsent": false,
  "consentUrl": null,
  "loanApprover": 3,
  "smartMfApprover": 3,
  "loanApprovalFlowDtos": null,
  "rejectionReason": null,
  "longitude": "90.4162917",
  "latitude": "23.7813079",
  "poId": 34359741951,
  "coBorrowerDto": null,
  "reasonForLoan": null,
  "numberOfChildGoToSchool": null,
  "earningFromMainSourceMonthly": 10000,
  "earningFromOtherSourceMonthly": null,
  "totalEarningMonthly": 10000,
  "houseRent": null,
  "foodExpense": 0,
  "educationalExpense": 0,
  "medicalExpense": 0,
  "utilityExpense": 0,
  "ceremonyExpense": 0,
  "otherOrgSavingsExpense": 0,
  "othersExpense": 0,
  "totalExpense": 0,
  "otherOrgLoanMontlyInstallmentAmount": 0.0,
  "bankLoanMonthlyInstallmentAmount": 0.0,
  "otherDebt": 0,
  "totalDebt": 0,
  "monthlyCashInHand": 10000,
  "monthlyInstallmentForProposedLoan": 1230,
  "toleranceLimit": 12,
  "memberMobileNumber": null,
  "bankBranch": null,
  "address": null,
  "contactNo": null,
  "noOfPreviousLoanFromBrac": 0,
  "husbandMonthlyIncome": 0,
  "firstChildIncome": 0,
  "secondChildIncome": 0,
  "rcaEnabled": null,
  "earner": 1,
  "ownIncome": null,
  "loanUser": 1,
  "ageType": 4,
  "isNewInsurer": null,
  "disbursedAmount": null,
  "principalAmount": null,
  "outstandingBalance": null,
  "principalOutStanding": null,
  "interestReceivable": null,
  "interestRealizable": null,
  "overdueAmount": null,
  "otrPercentage": null,
  "guardian": null,
  "loanStatus": null,
  "otcLoanModeOfPaymentDto": null,
  "modeOfPaymentId": null,
  "autoDebitCollectionDto": null,
  "otcBankDto": null,
  "bankAccountId": null,
  "bankAccountTypeId": null,
  "interestOutstanding": null,
  "provisionInterest": null,
  "totalOutstandingBalance": null,
  "premiumUnearnedAmount": null,
  "refinancedAmount": null,
  "rescheduledAmount": null,
  "specialSavingsAccountIds": null,
  "specialSavingsAccountNumbers": null,
  "loanProposalType": 4,
  "domainStatusId": null,
  "apiDataSource": 1,
  "voLeaderId": null,
  "loanRecommenderId": null,
  "fristRepaymentDate": null,
  "approvedNoOfInstallment": null,
  "approvedInstallmentAmount": null,
  "digitalDisbursementTransactionDesc": null,
  "dedupeBufferLoanProposalDto": {
    "id": null,
    "applicationDate": null,
    "disbursementDate": null,
    "fristRepaymentDate": null,
    "memberShipDate": null,
    "loanProductId": null,
    "loanAccountId": 0,
    "loanProposalId": null,
    "memberId": null,
    "proposedLoanAmount": null,
    "proposalDurationInMonths": null,
    "proposedGrantAmount": null,
    "schemeId": null,
    "sectorId": null,
    "sectorName": null,
    "branchName": null,
    "branchCode": null,
    "proposalNo": null,
    "branchId": null,
    "poId": null,
    "microInsurance": null,
    "modeOfPaymentId": null,
    "approvedDurationInMonths": null,
    "approvedLoanAmount": null,
    "approvedGrantAmount": null,
    "approvedNoOfInstallment": null,
    "approvedInstallmentAmount": null,
    "policyTypeId": null,
    "policyTypeName": null,
    "secondInsurer": null,
    "premiumAmount": null,
    "premiumInterestRate": null,
    "grantPercentage": null,
    "cohortMappingId": null,
    "nominees": null,
    "projectId": null,
    "projectCode": null,
    "projectName": null,
    "voCode": null,
    "voId": null,
    "voCategoryId": null,
    "memberTypeId": null,
    "subSectorId": null,
    "flag": 1,
    "frequencyId": null,
    "loanCollectionFrequencyId": null,
    "savingsCollectionFrequencyId": null,
    "coBorrowerDto": null,
    "updated": false,
    "signConsent": false,
    "showConsentReportButton": false,
    "consentUrl": null,
    "loanApprover": null,
    "rejectionReason": null,
    "loanProposalStatusId": null,
    "insuranceProductId": null,
    "orgId": null,
    "memberNumber": null,
    "memberName": null,
    "memberDateOfBirth": null,
    "voName": null,
    "productName": null,
    "loanCode": null,
    "codeShortName": null,
    "schemeName": null,
    "noOfInstallment": null,
    "statusName": null,
    "approverName": null,
    "principleAmount": null,
    "installmentAmount": null,
    "disbursedAmount": null,
    "apiDataSource": null,
    "subSectorName": null,
    "genderName": null,
    "earner": null,
    "ownIncome": null,
    "familyIncome": null,
    "otherIncome": null,
    "interestRate": null,
    "proposalRemarks": null,
    "loanUser": null,
    "memberTypeName": null,
    "memberAge": null,
    "memberNid": null,
    "memberStatusName": null,
    "memberStatusId": null,
    "insuranceProductName": null,
    "bracCommissionAmount": 0.0,
    "memberCommissionAmount": 0.0,
    "minDisburseAmount": null,
    "maxDisburseAmount": null,
    "paymentDto": null,
    "otcLoanModeOfPaymentDto": null,
    "autoDebitCollectionDto": null,
    "bankId": null,
    "loanProductDetailsId": null,
    "principalAmount": null,
    "outstandingBalance": null,
    "principalOutStanding": null,
    "interestReceivable": null,
    "interestRealizable": null,
    "overdueAmount": null,
    "otrPercentage": null,
    "loanStatus": null,
    "bkashWalletNo": null,
    "rocketWalletNo": null,
    "loanSchedule": null,
    "guardian": null,
    "specialSavingsAccountIds": null,
    "specialSavingsAccountNumbers": null,
    "guarantors": null,
    "specialSavingsAccountNames": null,
    "loanProductTypeId": null,
    "loanProductPolicyId": null,
    "loanProposalType": null,
    "proposalRefNo": null,
    "domainStatusId": null,
    "createdAt": null,
    "deleted": false,
    "isMigrated": null,
    "enrollmentStatus": null,
    "disbursementSubStatus": null,
    "isNewMember": true,
    "approverInfo": null,
    "branchRecommenderInfo": null,
    "progotiDocumentcheckList": null,
    "savingsAccountList": null,
    "digitalDisbursementTransactionDesc": null,
    "specialSavingsAccountsLongList": [],
    "specialSavingsAccountsLongArray": []
  },
  "approverInfo": null,
  "branchRecommenderInfo": null,
  "progotiDocumentcheckList": null,
  "typeOfResidence": 1,
  "isRelativeInPresentAddress": false,
  "relativeName": "",
  "relativePhoneNo": "",
  "passbookPhotoUrl": null,
  "rca": null,
  "checklist": null,
  "approvalRemarks": null,
  "residenceDurationInMonth": null,
  "voLeaderName": null,
  "memberBufferId": null,
  "finalApprover": 3,
  "otherMemberName": null,
  "disbursementAmount": null,
  "specialSavingsAccountsLongList": [],
  "dedupeDataMissing": true,
  "specialSavingsAccountsLongArray": [],
  "apiDataSourceDcsOrSmartPo": true
}
]

> {%

  function uuid() {
    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
      var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
      return v.toString(16);
    });
  }

  client.global.set("loan-uid", uuid())


  client.test("Buffer Loan Proposal Successful", function () {
    client.assert(response.status === 200, "Buffer Loan Proposal Failed");
    client.global.set("loan-uid", response.body[0].id)
  });
%}

<> 2024-07-16T162749.200.json

### Recommend by BM
POST http://localhost:8080/smart-mf/v1/buffer-loan-proposals/{{loan-uid}}/forward
Content-Type: application/json
x-app-type: SMART_BM
X-APK-VERSION: 53
X-APK-VERSION-CODE: 1.0.53-uat(09-May 06 42 PM)
X-DEVICE-MODEL: HONOR - CRT-NX1 - CRT-NX1 - 33 - REL
X-Authorization: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIwMDE1MDgyNCIsIlRPS0VOX1ZBTElESVRZX1ZFUlNJT04iOjEsIktFWV9UT0tFTl9DUkVBVElPTl9USU1FU1RBTVAiOjE3MjExMjQwMDAxODMsIkFVVEhPUklUSUVTIjoiUk9MRV9BRE1JTixST0xFX1NNQVJUX01GLFJPTEVfQk0iLCJJRF9LRVkiOjQwMTQ0NzY4NywiQlJBTkNIX0lEIjozNDIsIlVTRVJfTkFNRSI6IjAwMTUwODI0IiwiQ09SRV9VU0VSX0lEX0tFWSI6MzUzNTMsIlBST0pFQ1RfSUQiOjEsImV4cCI6MTcyMTEyNzYwMH0.WW58bOxaedn2HVeOO0lAq5-CtWNlspkVt_9gaSlbZ0TtKnG9LOLm2L0UXNFjZpZT0QgZdlhiF_f_Rh_5_fljyg

{
  "checklist": {
    "childNumber": 1,
    "numberOfEarningMember": 1,
    "isMemberHouseOwner": true,
    "livingTimeInCurrentPlace": 100,
    "isHomeOwnerKnowsAboutLoan": true,
    "isPoLoanConsistent": true,
    "hasEarnerOccupationChanged": true,
    "isFamilyMemberKnowsAboutLoan": true,
    "isGuarantorHasSocialAcceptability": true,
    "acceptanceInSociety": 5,
    "pictureOfClientHouse": "file_50673_641406145_80456328_690333047_1912644525.jpg",
    "guarantorRating": 5
  },
  "message": "TEST",
  "remarks": "TEST",
  "approvedLoanAmount": 11011,
  "activitiesName": "TEST",
  "installmentAmount": 0,
  "approvedTransactionId": 0,
  "proposedLoanAmount": 11011,
  "premiumAmount": 0
}

> {%
  client.test("Recommend by BM Successful", function () {
    client.assert(response.status === 200, "Recommend by BM Failed");
  });
%}

### Recommend by AM


### Recommend by RM


### Recommend by DM


### Test all status are okay


